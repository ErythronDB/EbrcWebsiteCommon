#!/bin/bash

sites=(
  https://veupathdb.org
  https://amoebadb.org
  https://cryptodb.org
  https://fungidb.org
  https://giardiadb.org
  https://hostdb.org
  https://microsporidiadb.org
  https://piroplasmadb.org
  https://plasmodb.org
  https://toxodb.org
  https://trichdb.org
  https://tritrypdb.org
  https://vectorbase.org
)

if [ $# -ne 1 ]; then
  echo
  echo "USAGE: eupathNotifyInvalidPublicStratsOwners <auth_code>"
  echo
  echo "auth_code = 'user_email|password' of an admin user"
  echo
  exit 1
fi

authCode=$1
notifyUsers="false"

for site in "${sites[@]}"; do
  url="$site/a/service/invalid-public-strats-report?notifyUsers=$notifyUsers"
  cmd="curl -H \"auth-code: $authCode\" -X GET $url"
  echo "##############################################"
  echo "$site"
  echo "> $cmd"
  echo "##############################################"
  $cmd
  echo
done
